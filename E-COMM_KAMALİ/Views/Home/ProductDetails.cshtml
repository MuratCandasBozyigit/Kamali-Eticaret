<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ürün Detay Sayfası</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700;800&display=swap">
    <link rel="stylesheet" href="/css/Mağaza/ProductDetailPage.css">
</head>
<body>
    <div class="container">
        <div class="card-wrapper">
            <div class="card">
                <div class="product-imgs">
                    <div class="img-display">
                        <div class="img-showcase">
                            <img src="@Model.ImagePath" alt="Product image" />
                        </div>
                    </div>
                </div>

                <div class="product-content">
                    <h2 class="product-title">@Model.ProductTitle</h2>
                    <a asp-controller="Home" asp-action="Index" class="product-link">Visit store</a>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <div class="product-price">
                        <p class="new-price">Price: <span>@Model.ProductPrice</span></p>
                    </div>
                    <div class="product-router">
                        <ul>
                            <li>Kategori: <span>@Model.Category.ParentCategoryName</span></li>
                            <li>Alt Kategori: <span>@Model.Category.ParentCategoryTag</span></li>
                        </ul>
                    </div>
                    <div class="product-detail">
                        <h2>About this item:</h2>
                        <p>@Model.ProductDescription</p>

                    </div>
                    <div class="purchase-info">
                        @*   <button type="button" class="btn">Add to Cart <i class="fas fa-shopping-cart"></i></button> *@
                        <form asp-controller="ShopCart" asp-action="AddToCart" method="post">
                            <input type="hidden" name="productId" value="@Model.Id" />
                            <input type="number" name="quantity" value="1" min="1" class="form-control mt-4" style="width: 60px; display: inline-block;" />
                            <button type="submit" class="btn btn-primary btn-hover">
                                <i class="fa-solid fa-cart-shopping"></i> Sepete Ekle
                            </button>
                        </form> 
                        <form asp-controller="Favourites" asp-action="AddToFavourites" class="fav-btn" method="post">
                            <input type="hidden" name="productId" value="@Model.Id" />
                            <button type="submit" class="btn btn-primary btn-hover">
                                <i class="fa-regular fa-heart"></i></a> Favoriler
                            </button>
                        </form>
                    </div>

                </div>

             @*    <div class="product-fav">
                    <form asp-controller="Favourites" asp-action="AddToFavourites" method="post">
                        <input type="hidden" name="productId" value="@Model.Id" />
                        <button type="submit" class="btn btn-primary btn-hover">
                            <i class="fa-regular fa-heart"></i></a> Favoriler
                        </button>
                    </form>
                </div> *@
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const productDetails = document.querySelectorAll('.product-detail');

            productDetails.forEach(detail => {
                const originalText = detail.innerHTML;
                const truncatedText = originalText.substring(0, 150) + '...'; // Başlangıçta kısaltılmış metin

                if (originalText.length > 150) {
                    detail.innerHTML = truncatedText; // Kısaltılmış metni göster

                    const readMoreBtn = document.createElement('span');
                    readMoreBtn.className = 'read-more';
                    readMoreBtn.textContent = 'Devamını Oku'; // Buton metni

                    detail.appendChild(readMoreBtn); // Butonu metnin sonuna ekle

                    readMoreBtn.addEventListener('click', () => {
                        if (detail.classList.contains('expand')) {
                            detail.classList.remove('expand'); // Kapat durumunda metni kısalt
                            detail.innerHTML = truncatedText; // Kısaltılmış metni göster
                            detail.appendChild(readMoreBtn); // Butonu tekrar ekle
                            readMoreBtn.textContent = 'Devamını Oku';
                        } else {
                            detail.classList.add('expand'); // Devamını Oku açıldığında metni genişlet
                            detail.innerHTML = originalText; // Tam metni göster
                            detail.appendChild(readMoreBtn); // Butonu tekrar ekle
                            readMoreBtn.textContent = 'Kapat';
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>
