@model ECOMM.Core.ViewModels.CheckoutViewModel

<div class="card">
    <div class="card-body p-6">
        <h3>Sepet Özeti</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Ürün Adı</th>
                    <th>Fiyat</th>
                    <th>Miktar</th>
                    <th>Toplam</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.CartItems)
                {
                    <tr>
                        <td>@item.ProductName</td>
                        <td>@item.Price.ToString("C")</td>
                        <td>@item.Quantity</td>
                        <td>@item.TotalPrice.ToString("C")</td>
                    </tr>
                }
            </tbody>
        </table>

        <div>
            <h4>Toplam Tutar: @Model.TotalAmount.ToString("C")</h4>
        </div>
    </div>
</div>

<h3>Ödeme Bilgileri</h3>
<form asp-action="PlaceOrder" method="post">
    <div class="form-group">
        <label for="Address">Adres</label>
        <input type="text" class="form-control" id="Address" name="Address" placeholder="Adresinizi girin" required />
    </div>
    <div class="form-group">
        <label for="PaymentMethod">Ödeme Yöntemi</label>
        <select class="form-control" id="PaymentMethod" name="PaymentMethod">
            <option value="CreditCard">Kredi Kartı</option>
            <option value="PayPal">PayPal</option>
        </select>
    </div>

    <div class="form-group">
        <label for="CardNumber">Kredi Kartı Numarası</label>
        <input type="number" class="form-control" id="CardNumber" name="CardNumber"
               placeholder="1234 5678 9012 3456" required pattern="\d{4} \d{4} \d{4} \d{4}"
               maxlength="19" title="Kredi kartı numarasını dörtlü gruplar halinde girin (ör. 1234 5678 9012 3456)." />
    </div>


    <div class="form-group">
        <label for="ExpirationDate">Son Kullanma Tarihi</label>
        <input type="number" class="form-control" id="ExpirationDate" name="ExpirationDate"
               placeholder="MM/YY" required pattern="(0[1-9]|1[0-2])\/\d{2}" maxlength="5"
               title="Lütfen geçerli bir son kullanma tarihi girin (MM/YY formatında)." />
    </div>

    <div class="form-group">
        <label for="CVV">CVV</label>
        <input type="number" class="form-control" id="CVV" name="CVV" placeholder="123"
               required pattern="\d{3}" maxlength="3" title="Lütfen geçerli 3 haneli CVV numarası girin." />
    </div>



    <button type="submit" class="btn btn-primary">Siparişi Tamamla</button>
</form>


               @section Scripts{
    <script>
        document.getElementById("submitForm").addEventListener("submit", function(event){
            // Kredi Kartı Numarası
            var cardNumber = document.getElementById("CardNumber").value;
            var cardPattern = /^\d{4} \d{4} \d{4} \d{4}$/;
            if (!cardPattern.test(cardNumber)) {
                alert("Lütfen geçerli bir kredi kartı numarası girin.");
                event.preventDefault(); // Formu gönderme
                return;
            }

            // Son Kullanma Tarihi
            var expirationDate = document.getElementById("ExpirationDate").value;
            var expirationPattern = /^(0[1-9]|1[0-2])\/\d{2}$/;
            if (!expirationPattern.test(expirationDate)) {
                alert("Lütfen geçerli bir son kullanma tarihi girin.");
                event.preventDefault(); // Formu gönderme
                return;
            }

            // CVV
            var cvv = document.getElementById("CVV").value;
            var cvvPattern = /^\d{3}$/;
            if (!cvvPattern.test(cvv)) {
                alert("Lütfen geçerli bir CVV numarası girin.");
                event.preventDefault(); // Formu gönderme
                return;
            }
        });
    </script>

               }