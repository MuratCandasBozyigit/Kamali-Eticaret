@model ECOMM.Web.Areas.Admin.Controllers.ProductController.HomeViewModel

@{
    var viewMode = ViewData["ViewMode"]?.ToString() ?? "table"; // Başlangıçta "table" olarak ayarlanıyor
}

<h2>Ürün Listesi</h2>

<div class="mt-4" style="text-align:right;">
    <a asp-area="Admin" asp-controller="Product" asp-action="Create" class="btn btn-primary ti-plus">Ekle</a>
</div>

@if (viewMode == "table")
{
    <table id="productTable" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Resim</th>
                <th>Başlık</th>
                <th>Açıklama</th>
                <th>Fiyat</th>
                <th>Kategori</th>
                <th>İşlemler</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var product in Model.Products)
            {
                <tr id="product-@product.Id">
                    <td>
                        <img src="@Url.Content(product.ImagePath ?? "~/images/default.jpg")" alt="Ürün Resmi" width="50">
                    </td>
                    <td>@product.ProductTitle</td>
                    <td>@product.ProductDescription</td>
                    <td>@product.ProductPrice.ToString("C")</td>
                    <td>@product.Category?.ParentCategoryName</td>
                    <td>
                        <a href="@Url.Action("Edit", "Product", new { area = "Admin", id = product.Id })" class="btn btn-sm btn-warning">Düzenle</a>
                        <button class="btn btn-sm btn-danger deleteCategory" data-id="@product.Id">Sil</button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}

<div class="mt-4" style="text-align:center;">
    @if (Model.CurrentPage > 1)
    {
        <a href="@Url.Action("Index", "Product", new { area = "Admin", page = Model.CurrentPage - 1 })" class="btn btn-secondary">Önceki Sayfa</a>
    }

    @for (int i = 1; i <= Model.TotalPages; i++)
    {
        <a href="@Url.Action("Index", "Product", new { area = "Admin", page = i })" class="btn @(i == Model.CurrentPage ? "btn-primary" : "btn-outline-primary")">@i</a>
    }

    @if (Model.CurrentPage < Model.TotalPages)
    {
        <a href="@Url.Action("Index", "Product", new { area = "Admin", page = Model.CurrentPage + 1 })" class="btn btn-secondary">Sonraki Sayfa</a>
    }
</div>

@section Css {
    <link rel="stylesheet" href="~/css/Admin/Product/Index.css" asp-append-version="true" />
}
